<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberShield | Pentester & Security Specialist</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Contenedor invisible para el ancla de inicio -->
    <div id="top"></div>

    <div class="particles-container" id="particles"></div>
    <div class="network-lines"></div>

    <!-- Contenedor invisible necesario para Google Translate -->
    <div id="google_translate_element" style="display:none;"></div>

<header>
<div class="container nav-container">
    <div class="logo-hamburger">
        <!-- Logo como enlace que lleva al inicio -->
        <a href="#top" class="logo">
            Krater
        </a>
        <!-- Bot√≥n hamburguesa para m√≥vil -->
        <button class="menu-toggle"><i class="fas fa-bars"></i></button>
    </div>

    <ul class="nav-links">
        <li><a href="#quien-soy" data-translate="nav.about">¬øQui√©n Soy?</a></li>
        <li><a href="#habilidades" data-translate="nav.skills">Habilidades</a></li>
        <li><a href="#proyectos" data-translate="nav.projects">Proyectos</a></li>
        <li><a href="#historial-academico" data-translate="nav.education">Historial Acad√©mico</a></li>
        <li><a href="#experiencia-laboral" data-translate="nav.experience">Experiencia Laboral</a></li>
        <li><a href="#certificaciones" data-translate="nav.certifications">Certificaciones</a></li>
        <li><a href="#contacto" data-translate="nav.contact">Contacto</a></li>
    </ul>

<div class="header-buttons">
    <div class="language-btn">
        <select id="language-selector">
            <option value="es">Espa√±ol</option>
            <option value="en">English</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="por">Portugu√©s</option>
            <option value="chi">Chino</option>
            <option value="ru">Ruso</option>
        </select>
    </div>

<div class="theme-selector">
    <button class="theme-btn">Tema ‚ñæ</button>
    <div class="theme-options">
        <div class="theme-option" data-theme="light">Claro</div>
        <div class="theme-option" data-theme="dark">Oscuro</div>
    </div>
</div>
</header>

<section class="hero" id="inicio">
    <div class="container hero-content">
        <div class="hero-profile">
            <div class="profile-image">
                <i class="fas fa-user-secret"></i>
            </div>
        </div>
        <div class="hero-text">
            <h1 data-translate="hero.title">David Cigaran Flores</h1>
            <p class="tagline" data-translate="hero.tagline">Protegiendo sistemas mediante pruebas ofensivas</p>
            <p data-translate="hero.description">Especialista en seguridad ofensiva con m√°s de 8 a√±os de experiencia identificando vulnerabilidades en infraestructuras cr√≠ticas y aplicaciones empresariales.</p>
            <div class="cta-buttons">
                <a href="#proyectos" class="cta-button" data-translate="hero.projectsBtn">Ver Proyectos</a>
                <a href="#contacto" class="cta-button secondary" data-translate="hero.contactBtn">Contactar</a>
            </div>
        </div>
    </div>
</section>


    <section class="section" id="quien-soy">
        <div class="container">
            <h2 class="section-title" data-translate="about.title">¬øQui√©n Soy?</h2>
            <div class="about-content">
                <div class="about-text">
                    <h3 data-translate="about.subtitle">Especialista en Seguridad Ofensiva</h3>
                    <p data-translate="about.paragraph1">Soy un profesional de la ciberseguridad especializado en pruebas de penetraci√≥n y auditor√≠as de seguridad. Mi enfoque combina metodolog√≠as estructuradas con pensamiento creativo para identificar vulnerabilidades que otros podr√≠an pasar por alto.</p>
                    <p data-translate="about.paragraph2">He trabajado con empresas de diversos sectores, desde startups tecnol√≥gicas hasta corporaciones financieras, ayud√°ndoles a fortalecer sus defensas mediante la identificaci√≥n proactiva de puntos d√©biles en sus sistemas.</p>
                    <p data-translate="about.paragraph3">Mi filosof√≠a se basa en que para defender eficazmente, primero hay que entender c√≥mo atacar. Por eso, me mantengo constantemente actualizado con las √∫ltimas t√©cnicas de explotaci√≥n y vectores de ataque.</p>
                    
                    <div class="certifications">
                        <h4 data-translate="about.certificationsTitle">Certificaciones</h4>
                        <ul class="cert-list">
                            <li data-translate="about.cert1">OSCP (Offensive Security Certified Professional)</li>
                            <li data-translate="about.cert2">CEH (Certified Ethical Hacker)</li>
                            <li data-translate="about.cert3">CISSP (Certified Information Systems Security Professional)</li>
                            <li data-translate="about.cert4">CompTIA Security+</li>
                            <li data-translate="about.cert5">eJPT (eLearnSecurity Junior Penetration Tester)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="habilidades">
        <div class="container">
            <h2 class="section-title" data-translate="skills.title">Habilidades T√©cnicas</h2>
            <div class="skills-grid">
                <div class="skill-card">
                    <i class="fas fa-terminal"></i>
                    <h3 data-translate="skills.skill1.title">Pentesting Avanzado</h3>
                    <p data-translate="skills.skill1.description">Pruebas de penetraci√≥n web, m√≥vil y de red. An√°lisis de vulnerabilidades y explotaci√≥n de sistemas. Ingenier√≠a inversa y an√°lisis de malware.</p>
                </div>
                <div class="skill-card">
                    <i class="fas fa-tools"></i>
                    <h3 data-translate="skills.skill2.title">Herramientas de Seguridad</h3>
                    <p data-translate="skills.skill2.description">Dominio de Metasploit, Burp Suite, Nmap, Wireshark y herramientas de testing. Desarrollo de scripts personalizados para auditor√≠as.</p>
                </div>
                <div class="skill-card">
                    <i class="fas fa-code"></i>
                    <h3 data-translate="skills.skill3.title">Desarrollo Seguro</h3>
                    <p data-translate="skills.skill3.description">Revisi√≥n de c√≥digo fuente, an√°lisis de aplicaciones y APIs. Conocimiento en OWASP Top 10 y pr√°cticas de desarrollo seguro.</p>
                </div>
                <div class="skill-card">
                    <i class="fas fa-network-wired"></i>
                    <h3 data-translate="skills.skill4.title">Seguridad de Red</h3>
                    <p data-translate="skills.skill4.description">An√°lisis de arquitecturas de red, detecci√≥n de intrusiones, firewall y sistemas de prevenci√≥n. Hardening de sistemas y redes.</p>
                </div>
                <div class="skill-card">
                    <i class="fas fa-user-secret"></i>
                    <h3 data-translate="skills.skill5.title">Ingenier√≠a Social</h3>
                    <p data-translate="skills.skill5.description">Pruebas de concienciaci√≥n, simulaciones de phishing y evaluaci√≥n de la resistencia humana en organizaciones.</p>
                </div>
                <div class="skill-card">
                    <i class="fas fa-cloud"></i>
                    <h3 data-translate="skills.skill6.title">Seguridad en la Nube</h3>
                    <p data-translate="skills.skill6.description">Auditor√≠a de entornos AWS, Azure y GCP. Implementaci√≥n de pol√≠ticas de seguridad y mejores pr√°cticas en la nube.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="proyectos">
        <div class="container">
            <h2 class="section-title" data-translate="projects.title">Proyectos Destacados</h2>
            <div class="projects-grid">
                <div class="project-card">
                    <div class="project-header">
                        <i class="fas fa-lock"></i>
                    </div>
                    <div class="project-content">
                        <h3 data-translate="projects.project1.title">Auditor√≠a FinTech</h3>
                        <p data-translate="projects.project1.description">Evaluaci√≥n de seguridad completa para una plataforma FinTech, identificando vulnerabilidades cr√≠ticas en su API y aplicaci√≥n m√≥vil.</p>
                        <div class="project-tags">
                            <span class="project-tag" data-translate="projects.tags.web">Web App</span>
                            <span class="project-tag" data-translate="projects.tags.api">API</span>
                            <span class="project-tag" data-translate="projects.tags.mobile">Mobile</span>
                        </div>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-header">
                        <i class="fas fa-network-wired"></i>
                    </div>
                    <div class="project-content">
                        <h3 data-translate="projects.project2.title">Infraestructura Corporativa</h3>
                        <p data-translate="projects.project2.description">Pentesting de red interna para empresa del Fortune 500, descubriendo vectores de ataque que permit√≠an movimiento lateral.</p>
                        <div class="project-tags">
                            <span class="project-tag" data-translate="projects.tags.network">Red Interna</span>
                            <span class="project-tag" data-translate="projects.tags.ad">Active Directory</span>
                            <span class="project-tag" data-translate="projects.tags.privilege">Privilege Escalation</span>
                        </div>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-header">
                        <i class="fas fa-user-secret"></i>
                    </div>
                    <div class="project-content">
                        <h3 data-translate="projects.project3.title">Social Engineering</h3>
                        <p data-translate="projects.project3.description">Campa√±a de concienciaci√≥n mediante pruebas de ingenier√≠a social controladas para evaluar la resistencia humana de una organizaci√≥n.</p>
                        <div class="project-tags">
                            <span class="project-tag" data-translate="projects.tags.phishing">Phishing</span>
                            <span class="project-tag" data-translate="projects.tags.awareness">Concienciaci√≥n</span>
                            <span class="project-tag" data-translate="projects.tags.human">Factor Humano</span>
                        </div>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-header">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="project-content">
                        <h3 data-translate="projects.project4.title">Hardening de Servidores</h3>
                        <p data-translate="projects.project4.description">Refuerzo de seguridad en servidores cr√≠ticos para una instituci√≥n gubernamental, implementando medidas de protecci√≥n avanzadas.</p>
                        <div class="project-tags">
                            <span class="project-tag" data-translate="projects.tags.linux">Linux</span>
                            <span class="project-tag" data-translate="projects.tags.windows">Windows Server</span>
                            <span class="project-tag" data-translate="projects.tags.hardening">Hardening</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="historial-academico">
        <div class="container">
            <h2 class="section-title" data-translate="education.title">Historial Acad√©mico</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3 data-translate="education.item1.title">M√°ster en Ciberseguridad</h3>
                        <div class="timeline-date">2020 - 2021</div>
                        <p data-translate="education.item1.university">Universidad Polit√©cnica de Madrid</p>
                        <p data-translate="education.item1.description">Especializaci√≥n en seguridad ofensiva y pruebas de penetraci√≥n. Proyecto final sobre an√°lisis de malware avanzado.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3 data-translate="education.item2.title">Grado en Ingenier√≠a Inform√°tica</h3>
                        <div class="timeline-date">2015 - 2019</div>
                        <p data-translate="education.item2.university">Universidad Complutense de Madrid</p>
                        <p data-translate="education.item2.description">Especialidad en seguridad de la informaci√≥n. Trabajo de fin de grado sobre criptograf√≠a aplicada.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3 data-translate="education.item3.title">Bachillerato Tecnol√≥gico</h3>
                        <div class="timeline-date">2013 - 2015</div>
                        <p data-translate="education.item3.university">IES Francisco de Goya</p>
                        <p data-translate="education.item3.description">Especialidad en ciencias tecnol√≥gicas con enfoque en programaci√≥n y redes.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="experiencia-laboral">
        <div class="container">
            <h2 class="section-title" data-translate="experience.title">Experiencia Laboral</h2>
            <div class="experience-grid">
                <div class="experience-card">
                    <div class="experience-header">
                        <div class="company-logo">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="company-info">
                            <h3 data-translate="experience.job1.company">BBVA Security Operations Center</h3>
                            <div class="position" data-translate="experience.job1.position">Analista de Ciberseguridad</div>
                            <div class="experience-date">2022 - Presente</div>
                        </div>
                    </div>
                    <div class="experience-content">
                        <p data-translate="experience.job1.description">Monitoreo de amenazas, an√°lisis de incidentes de seguridad y respuesta a vulnerabilidades en sistemas bancarios cr√≠ticos.</p>
                        <div class="responsibilities">
                            <h4 data-translate="experience.responsibilities">Responsabilidades Clave:</h4>
                            <ul>
                                <li data-translate="experience.job1.responsibility1">Gesti√≥n de incidentes de seguridad en tiempo real</li>
                                <li data-translate="experience.job1.responsibility2">An√°lisis forense digital en sistemas comprometidos</li>
                                <li data-translate="experience.job1.responsibility3">Coordinaci√≥n con equipos de respuesta a incidentes</li>
                                <li data-translate="experience.job1.responsibility4">Desarrollo de playbooks de seguridad</li>
                            </ul>
                        </div>
                        <div class="tech-used">
                            <span class="tech-tag" data-translate="experience.tech.siem">SIEM</span>
                            <span class="tech-tag" data-translate="experience.tech.edr">EDR</span>
                            <span class="tech-tag" data-translate="experience.tech.forensics">Forensics</span>
                            <span class="tech-tag" data-translate="experience.tech.threat">Threat Intelligence</span>
                        </div>
                    </div>
                </div>
                <!-- M√°s experience-cards seguir√≠an el mismo patr√≥n -->
            </div>
        </div>
    </section>

    <section class="section" id="certificaciones">
        <div class="container">
            <h2 class="section-title" data-translate="certifications.title">Certificaciones</h2>
            <div class="certifications-grid">
                <div class="cert-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3 data-translate="certifications.cert1.title">OSCP</h3>
                    <p data-translate="certifications.cert1.description">Offensive Security Certified Professional</p>
                    <p data-translate="certifications.cert1.date">Expedici√≥n: 2021</p>
                </div>
                <div class="cert-card">
                    <i class="fas fa-user-secret"></i>
                    <h3 data-translate="certifications.cert2.title">CEH</h3>
                    <p data-translate="certifications.cert2.description">Certified Ethical Hacker</p>
                    <p data-translate="certifications.cert2.date">Expedici√≥n: 2020</p>
                </div>
                <div class="cert-card">
                    <i class="fas fa-bug"></i>
                    <h3 data-translate="certifications.cert3.title">eJPT</h3>
                    <p data-translate="certifications.cert3.description">eLearnSecurity Junior Penetration Tester</p>
                    <p data-translate="certifications.cert3.date">Expedici√≥n: 2017</p>
                </div>
                <div class="cert-card">
                    <i class="fas fa-cloud"></i>
                    <h3 data-translate="certifications.cert4.title">AWS Security</h3>
                    <p data-translate="certifications.cert4.description">Especialidad en Seguridad de AWS</p>
                    <p data-translate="certifications.cert4.date">Expedici√≥n: 2022</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="contacto">
        <div class="container">
            <h2 class="section-title" data-translate="contact.title">Contacto</h2>
            <div class="contact-container">
                <div class="contact-info">
                    <h3 data-translate="contact.subtitle">Informaci√≥n Personal</h3>
                    <div class="contact-method">
                        <div class="contact-details">
                            <h4 data-translate="contact.email">Correo Electr√≥nico</h4>
                            <p>davidcigaran@gmail.com</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="contact-details">
                            <h4 data-translate="contact.phone">Tel√©fono</h4>
                            <p>688 846 527</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="contact-details">
                            <h4 data-translate="contact.languages">Idiomas</h4>
                            <p data-translate="contact.spanish">Espa√±ol: Nativo</p>
                            <p data-translate="contact.english">Ingl√©s: Nivel Medio</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="contact-details">
                            <h4 data-translate="contact.licenses">Licencias de Conducci√≥n</h4>
                            <p data-translate="contact.licenseB">Permiso B (Coche)</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="contact-details">
                            <h4 data-translate="contact.availability">Disponibilidad</h4>
                            <p data-translate="contact.response">Inmediata</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="social-links">
                <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                <a href="#" class="social-link"><i class="fab fa-hacker-news"></i></a>
            </div>
            <p class="copyright" data-translate="footer.copyright">¬© 2023 CyberShield. Todos los derechos reservados. Este sitio utiliza conexiones seguras.</p>
        </div>
    </footer>

<script>
/********************
 * SISTEMA DE TRADUCCI√ìN
 ********************/
let currentLanguage = 'es';
let translations = {};

// Funci√≥n para cargar las traducciones
async function loadTranslations(lang) {
    try {
        console.log(`Cargando traducciones para: ${lang}`);
        const response = await fetch(`translations/${lang}.json`);
        
        if (!response.ok) {
            throw new Error(`Error HTTP: ${response.status}`);
        }
        
        const data = await response.json();
        console.log(`Traducciones cargadas para ${lang}:`, data);
        return data;
        
    } catch (error) {
        console.error('Error cargando traducciones:', error);
        
        // Si falla y no es espa√±ol, intentar cargar espa√±ol
        if (lang !== 'es') {
            console.log('Intentando cargar espa√±ol como fallback...');
            return loadTranslations('es');
        }
        
        console.error('No se pudieron cargar las traducciones');
        return {};
    }
}

// Funci√≥n auxiliar para obtener valores anidados en objetos
function getNestedValue(obj, path) {
    if (!obj || typeof obj !== 'object') {
        console.warn('Objeto de traducciones no v√°lido');
        return null;
    }
    
    return path.split('.').reduce((current, key) => {
        return current && current[key] !== undefined ? current[key] : null;
    }, obj);
}

// Funci√≥n para aplicar las traducciones
async function applyTranslations(lang) {
    console.log(`Aplicando traducciones para: ${lang}`);
    
    try {
        translations = await loadTranslations(lang);
        currentLanguage = lang;
        
        if (Object.keys(translations).length === 0) {
            console.error('No hay traducciones disponibles');
            return;
        }
        
        // Actualizar todos los elementos con data-translate
        const translatableElements = document.querySelectorAll('[data-translate]');
        console.log(`Encontrados ${translatableElements.length} elementos para traducir`);
        
        let translatedCount = 0;
        translatableElements.forEach(element => {
            const key = element.getAttribute('data-translate');
            const translatedText = getNestedValue(translations, key);
            
            if (translatedText) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translatedText;
                } else {
                    element.textContent = translatedText;
                }
                translatedCount++;
            } else {
                console.warn(`No se encontr√≥ traducci√≥n para clave: ${key}`);
            }
        });
        
        console.log(`Traducidos ${translatedCount} elementos`);
        
        // Actualizar el atributo lang del documento
        document.documentElement.lang = lang;
        
        // Actualizar el selector de idioma
        const languageSelector = document.getElementById('language-selector');
        if (languageSelector) {
            languageSelector.value = lang;
        }
        
        // Guardar preferencia de idioma
        localStorage.setItem('preferredLanguage', lang);
        
        console.log(`Traducciones aplicadas exitosamente para: ${lang}`);
        
    } catch (error) {
        console.error('Error aplicando traducciones:', error);
    }
}

// Funci√≥n para inicializar el sistema de traducci√≥n
async function initTranslation() {
    console.log('Inicializando sistema de traducci√≥n...');
    
    // Cargar idioma guardado o usar el del navegador
    const savedLanguage = localStorage.getItem('preferredLanguage');
    const browserLanguage = navigator.language.split('-')[0];
    const supportedLanguages = ['es', 'en', 'fr', 'de', 'it'];
    const defaultLanguage = savedLanguage || (supportedLanguages.includes(browserLanguage) ? browserLanguage : 'es');
    
    console.log(`Idioma seleccionado: ${defaultLanguage}`);
    
    await applyTranslations(defaultLanguage);
    
    // Configurar el evento del selector de idioma
    const languageSelector = document.getElementById('language-selector');
    if (languageSelector) {
        languageSelector.addEventListener('change', function() {
            console.log(`Cambiando idioma a: ${this.value}`);
            applyTranslations(this.value);
        });
    } else {
        console.error('No se encontr√≥ el selector de idioma');
    }
}

/********************
 * PARTICULAS
 ********************/
function createParticles() {
    const container = document.getElementById('particles');
    if (!container) {
        console.error('No se encontr√≥ el contenedor de part√≠culas');
        return;
    }
    
    const particleCount = 40;
    container.innerHTML = '';
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');

        const startX = Math.random() * 120 - 10;
        const startY = Math.random() * 120 - 10;
        particle.style.left = `${startX}%`;
        particle.style.top = `${startY}%`;

        const size = Math.random() * 8 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;

        // üî• Color tipo ascuas volc√°nicas
        const red = 255;
        const green = Math.floor(Math.random() * 80 + 40);  // Toques naranjas/amarillos (40‚Äì120)
        const blue = Math.floor(Math.random() * 40);        // Leve componente c√°lido (0‚Äì40)
        const opacity = Math.random() * 0.3 + 0.7;          // Brillo entre 0.7 y 1.0
        particle.style.backgroundColor = `rgba(${red}, ${green}, ${blue}, ${opacity})`;

        const duration = Math.random() * 15 + 15;
        const animationType = Math.random();

        if (animationType < 0.33) particle.style.animation = `float ${duration}s infinite linear`;
        else if (animationType < 0.66) particle.style.animation = `floatDiagonal ${duration}s infinite linear`;
        else particle.style.animation = `floatRandom ${duration}s infinite linear`;

        particle.style.animationDelay = '0s';
        particle.style.animationPlayState = 'running';

        container.appendChild(particle);
    }
}

/********************
 * ANIMACION SCROLL
 ********************/
function initScrollAnimations() {
    const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = 1;
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    document.querySelectorAll('.section').forEach(section => {
        section.style.opacity = 0;
        section.style.transform = 'translateY(20px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(section);
    });
}

/********************
 * SCROLL SUAVE
 ********************/
function initSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                window.scrollTo({ top: targetElement.offsetTop - 80, behavior: 'smooth' });
            }
        });
    });
}
/********************
 * CAMBIO DE TEMA - SISTEMA CON ARCHIVOS CSS SEPARADOS
 ********************/
/********************
 * CAMBIO DE TEMA SIMPLIFICADO
/********************
 * CAMBIO DE TEMA
 ********************/
let lightThemeLink = null;
let currentTheme = 'dark';

function applyTheme(theme) {
    console.log('Aplicando tema:', theme);
    currentTheme = theme;
    
    if (theme === 'light') {
        // Cargar style2.css
        if (!lightThemeLink) {
            lightThemeLink = document.createElement('link');
            lightThemeLink.rel = 'stylesheet';
            lightThemeLink.href = 'css/style2.css';
            lightThemeLink.id = 'light-theme';
            document.head.appendChild(lightThemeLink);
            console.log('‚úÖ style2.css cargado');
        }
    } else {
        // Remover style2.css
        if (lightThemeLink) {
            lightThemeLink.remove();
            lightThemeLink = null;
            console.log('‚úÖ style2.css removido');
        }
    }
    
    localStorage.setItem('theme', theme);
    updateThemeButton(theme);
}

function updateThemeButton(theme) {
    const themeBtn = document.querySelector('.theme-btn');
    if (themeBtn) {
        themeBtn.textContent = theme === 'light' ? 'üåû Claro ‚ñæ' : 'üåô Oscuro ‚ñæ';
    }
}

function initThemeSystem() {
    const themeSelector = document.querySelector('.theme-selector');
    const themeOptions = document.querySelectorAll('.theme-option');
    
    if (!themeSelector) {
        console.error('‚ùå No se encontr√≥ .theme-selector');
        return;
    }
    
    // Click en bot√≥n principal
    themeSelector.addEventListener('click', (e) => {
        if (e.target.classList.contains('theme-btn')) {
            themeSelector.classList.toggle('active');
            e.stopPropagation();
        }
    });
    
    // Click en opciones
    themeOptions.forEach(option => {
        option.addEventListener('click', (e) => {
            const theme = option.getAttribute('data-theme');
            if (theme) {
                applyTheme(theme);
                themeSelector.classList.remove('active');
            }
            e.stopPropagation();
        });
    });
    
    // Cerrar men√∫ al click fuera
    document.addEventListener('click', () => {
        themeSelector.classList.remove('active');
    });
}

function loadTheme() {
    const savedTheme = localStorage.getItem('theme') || 'dark';
    console.log('Cargando tema:', savedTheme);
    applyTheme(savedTheme);
}

/********************
 * INICIALIZACI√ìN
 ********************/
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ Iniciando aplicaci√≥n...');
    
    // 1. Sistema de temas
    initThemeSystem();
    loadTheme();
    
    // 2. Otros componentes
    if (typeof createParticles === 'function') createParticles();
    if (typeof initScrollAnimations === 'function') initScrollAnimations();
    if (typeof initSmoothScroll === 'function') initSmoothScroll();
    if (typeof initTranslation === 'function') initTranslation();
    
    // 3. Sistema de men√∫
    initMenuSystem();
    
    // 4. Event listeners globales
    window.addEventListener('resize', () => {
        if (typeof createParticles === 'function') createParticles();
    });
    
    document.addEventListener('visibilitychange', () => {
        if (!document.hidden && typeof createParticles === 'function') createParticles();
    });
    
    console.log('‚úÖ Aplicaci√≥n iniciada');
});

/********************
 * GOOGLE TRANSLATE (compatibilidad)
 ********************/
function loadGoogleTranslate() {
    const gtScript = document.createElement('script');
    gtScript.type = 'text/javascript';
    gtScript.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
    document.head.appendChild(gtScript);
}

function googleTranslateElementInit() {
    new google.translate.TranslateElement({
        pageLanguage: 'es',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay: false
    }, 'google_translate_element');
}

/********************
 * SISTEMA DE MEN√ö HAMBURGUESA
 ********************/
function initMenuSystem() {
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    const navItems = document.querySelectorAll('.nav-links a');

    console.log('Inicializando men√∫ hamburguesa:');
    console.log('Menu toggle:', menuToggle);
    console.log('Nav links:', navLinks);
    console.log('Nav items:', navItems.length);

    if (menuToggle && navLinks) {
        // Abrir/cerrar men√∫ al hacer click en hamburguesa
        menuToggle.addEventListener('click', (e) => {
            navLinks.classList.toggle('active');
            console.log('Men√∫ toggled, estado:', navLinks.classList.contains('active'));
            e.stopPropagation();
        });

        // Cerrar men√∫ al hacer click en un enlace
        if (navItems.length > 0) {
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                    console.log('Men√∫ cerrado por click en enlace');
                });
            });
        }

        // Cerrar men√∫ si se hace click fuera del men√∫ o la hamburguesa
        document.addEventListener('click', (e) => {
            if (!navLinks.contains(e.target) && !menuToggle.contains(e.target)) {
                navLinks.classList.remove('active');
                console.log('Men√∫ cerrado por click fuera');
            }
        });
        
        console.log('‚úÖ Men√∫ hamburguesa inicializado');
    } else {
        console.warn('‚ö†Ô∏è Elementos del men√∫ no encontrados');
    }
}

/********************
 * HERRAMIENTAS DE DEPURACI√ìN
 ********************/
window.debugTheme = function() {
    console.log('=== üêõ DEBUG TEMA ===');
    console.log('Tema actual:', currentTheme);
    console.log('En localStorage:', localStorage.getItem('theme'));
    console.log('CSS claro cargado:', !!lightThemeLink);
    console.log('Archivos CSS en head:');
    document.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
        console.log('  -', link.href);
    });
};

window.forceTheme = function(theme) {
    console.log(`üéõÔ∏è Forzando tema: ${theme}`);
    applyTheme(theme);
};

// Verificar que los archivos CSS existen
window.checkThemeFiles = function() {
    console.log('=== üìÅ VERIFICANDO ARCHIVOS CSS ===');
    fetch('css/style.css')
        .then(r => console.log('style.css:', r.ok ? '‚úÖ EXISTE' : '‚ùå NO EXISTE'))
        .catch(() => console.log('style.css: ‚ùå ERROR al cargar'));
    fetch('css/style2.css')
        .then(r => console.log('style2.css:', r.ok ? '‚úÖ EXISTE' : '‚ùå NO EXISTE'))
        .catch(() => console.log('style2.css: ‚ùå ERROR al cargar'));
};

// Funci√≥n para forzar el tema claro (para pruebas)
window.forceLightTheme = function() {
    console.log('=== FORZANDO TEMA CLARO ===');
    applyTheme('light');
    console.log('Tema claro forzado');
};

// Funci√≥n para forzar el tema oscuro (para pruebas)
window.forceDarkTheme = function() {
    console.log('=== FORZANDO TEMA OSCURO ===');
    applyTheme('dark');
    console.log('Tema oscuro forzado');
};

// Depuraci√≥n de traducciones
window.debugTranslations = function() {
    console.log('=== DEBUG TRADUCCIONES ===');
    console.log('Idioma actual:', window.currentLanguage || 'No definido');
    console.log('Traducciones cargadas:', window.translations || {});
    console.log('Elementos traducibles:', document.querySelectorAll('[data-translate]').length);
    console.log('Selector de idioma:', document.getElementById('language-selector'));
};
</script>
</body>
</html>
